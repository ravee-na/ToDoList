{% extends 'base.html' %}

{% block head %}
<script src="https://kit.fontawesome.com/f2f86d248a.js" crossorigin="anonymous"></script>
{% endblock %}


{% block body %}

<div class="container">
    <div class="todo-app">
        <h2>To-Do List</h2>
        <div class="row">
            <form action="/" method="POST">
                <input type="text" name="content" id="input-box" placeholder="Add your text">
                <input type="submit" value="Add" id="add">
            </form>
        </div>

        <table>
            {% for task in tasks %}
                <tr>
                    <td>
                        <form action="/update/{{ task.id }}" method="POST" onsubmit="updateTask(event)">
                            <input type="text" name="content" id="content" value="{{ task.content }}" onchange="this.form.submit();">
                        </form>
                    </td>
                    <td>
                        <a id="delete" href="/delete/{{task.id}}">
                            <i class="fa-solid fa-xmark"></i>
                        </a>
                    </td>
                </tr>
            {% endfor %}
        </table>
    </div>
</div>

<script>
    function updateTask(event) {
        event.preventDefault();
        event.target.submit();
    }
</script>
{% endblock %}
